## ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±

- ìŠ¤í”„ë§ì€ ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì— ì‹¤í–‰í•  ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.
- ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€, ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ ê°™ì€ ê³³ì—ì„œ ì‚¬ìš©ëœë‹¤.
- ì˜ˆì œ
    - ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ë¯¸ë¦¬ ì—°ê²°í•˜ëŠ” ê°ì²´ì¸ NetworkClientë¥¼ í•˜ë‚˜ ìƒì„±í•œë‹¤ê³  ê°€ì •í•˜ì.
    - ì‹¤ì œë¡œ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , ë‹¨ìˆœ ë¬¸ìë§Œ ì¶œë ¥í•œë‹¤.
    - NetworkClientëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— connect()ë¥¼ í˜¸ì¶œí•˜ì—¬ ì—°ê²°ì„ ë§ºê³ 
    - ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ì— disConnect()ë¥¼ í˜¸ì¶œí•´ì„œ ì—°ê²°ì„ ëŠì–´ì•¼ í•œë‹¤.

### ì˜ˆì œ ì½”ë“œ

```java
public class NetworkClient {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message: " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " + url);
    }
}
```

### ìŠ¤í”„ë§ ë¹ˆì˜ ë¼ì´í”„ ì‚¬ì´í´

**ê°ì²´ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì…**

(ìƒì„±ì ì£¼ì…ë²•ì˜ ê²½ìš° ìƒì„± ì‹œ ì˜ì¡´ê´€ê³„ê°€ ìˆë‹¤ë©´ ì˜ì¡´ê´€ê³„ ì£¼ì… ì§„í–‰)

- ê°œë°œìê°€ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ ì‹œì ì„ ì•Œ ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ìŠ¤í”„ë§ì—ì„œ ì§€ì›í•œë‹¤.

### ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ ì‚¬ì´í´

**ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ ìŠ¤í”„ë§ ë¹ˆ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… â†’ ì´ˆê¸°í™” ì½œë°± â†’ ì‚¬ìš© â†’ ì†Œë©¸ì „ ì½œë°± â†’ ìŠ¤í”„ë§ ì¢…ë£Œ**

- **ì´ˆê¸°í™” ì½œë°±**: ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ
- **ì†Œë©¸ì „ ì½œë°±**: ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ

> **ì°¸ê³ : ê°ì²´ì˜ ìƒì„±ê³¼ ì´ˆê¸°í™”ë¥¼ ë¶„ë¦¬í•˜ì.**
ìƒì„±ìëŠ” í•„ìˆ˜ ì •ë³´ë¥¼ ë°›ê³ , ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì±…ì„ì„ ê°€ì§„ë‹¤.
ë°˜ë©´ì— ì´ˆê¸°í™”ëŠ” ì´ë ‡ê²Œ ìƒì„±ëœ ê°’ë“¤ì„ í™œìš©í•´ì„œ ì™¸ë¶€ ì»¤ë„¥ì…˜ì„ ì—°ê²°í•˜ëŠ” ë“± ë¬´ê±°ìš´ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
ë”°ë¼ì„œ ìƒì„±ì ì•ˆì—ì„œ ë¬´ê±°ìš´ ì´ˆê¸°í™” ì‘ì—…ì„ í•¨ê»˜ í•˜ëŠ” ê²ƒ ë³´ë‹¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ê³¼ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì„ ëª…í™•í•˜ê²Œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ìœ ì§€ë³´ìˆ˜ ê´€ì ì—ì„œ ì¢‹ë‹¤.
> 

## ìŠ¤í”„ë§ì˜ ë¹ˆ ìƒë³‘ì£¼ê¸° ì½œë°± ë°©ë²•

- ì¸í„°í˜ì´ìŠ¤(InitializingBean, DisposableBean)
- ì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •
- @PostCunstrcut, @PreDestory ì• ë…¸í…Œì´ì…˜ ì§€ì›

## ì¸í„°í˜ì´ìŠ¤ InitializingBean, DisposableBean

```java
public class NetworkClient implements InitializingBean, DisposableBean {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message: " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " + url);
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println("NetworkClient.afterPropertiesSet");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    @Override
    public void destroy() throws Exception {
        System.out.println("NetworkClient.destroy");
        disconnect();
    }
}
```

- `InitializingBean`: `afterPropertiesSet()` ë©”ì†Œë“œë¡œ ì´ˆê¸°í™” ì§€ì›
- `DisposableBean`: `destroy()` ë©”ì†Œë“œë¡œ ì†Œë©¸ ì§€ì›

**ì¶œë ¥ ê²°ê³¼**

```java
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.afterPropertiesSet
connect: http://hello-spring.dev
call: http://hello-spring.dev message: ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
17:20:42.954 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@7e5afaa6, started on Mon Sep 13 17:20:42 KST 2021
NetworkClient.destroy
close: http://hello-spring.dev
```

- **ì´ˆê¸°í™”, ì†Œë©¸ ì¸í„°í˜ì´ìŠ¤ ë‹¨ì **
    - ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì´ë¯€ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì˜ì¡´ì ì´ë‹¤.
    - ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì†Œë“œì˜ ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
    - ìì‹ ì´ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì ìš©í•  ìˆ˜ ì—†ë‹¤.

> **ì°¸ê³ :** ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ˆê¸°í™”, ì†Œë©¸ ë°©ë²•ì€ ìŠ¤í”„ë§ ì´ˆì°½ê¸°ì— ë‚˜ì˜¨ ë°©ë²•ì´ë‹¤. ì§€ê¸ˆì€ ë” ë‚˜ì€ ë°©ë²•ë“¤ì´ ì¡´ì¬í•˜ì—¬ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
> 

## ë¹ˆ ë“±ë¡ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì†Œë“œ

- ì„¤ì •ì •ë³´ì— `@Bean(initMethod = "init", destroyMethod = "close")` ì²˜ëŸ¼ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì†Œë“œ ì§€ì •ì´ ê°€ëŠ¥í•˜ë‹¤.

```java
@Configuration
static class LifeCycleConfig {

    @Bean(initMethod = "init", destroyMethod = "close")
    public NetworkClient networkClient() {
        NetworkClient networkClient = new NetworkClient();
        networkClient.setUrl("http://hello-spring.dev");
        return networkClient;
    }
}
```

**ì¶œë ¥ ì½˜ì†”**

```java
ìƒì„±ì í˜¸ì¶œ, url = null
NetworkClient.init
connect: http://hello-spring.dev
call: http://hello-spring.dev message: ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€
17:29:44.858 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@7e5afaa6, started on Mon Sep 13 17:29:44 KST 2021
NetworkClient.close
close: http://hello-spring.dev
```

- **íŠ¹ì§•**
    - ë©”ì†Œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
    - ìŠ¤í”„ë§ ë¹ˆì´ ìŠ¤í”„ë§ ì½”ë“œì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ì„¤ì •ì •ë³´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— **ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì´ˆê¸°í™”, ì¢…ë£Œ ë©”ì†Œë“œë¥¼ ì ìš© ê°€ëŠ¥í•˜ë‹¤.**
- **ì¢…ë£Œ ë©”ì†Œë“œ ì¶”ë¡ **
    - ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ëŒ€ë¶€ë¶„ `close`, `shutdown` ì´ë¼ëŠ” ì´ë¦„ì˜ ì¢…ë£Œ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
    - `@Bean`ì˜ `destoryMethod`ì˜ ê¸°ë³¸ê°’ì€ `(inferred)` `(ì¶”ë¡ )`ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆë‹¤.
    - ì´ ì¶”ë¡  ê¸°ëŠ¥ì€ `close`, `shutdown` ë¼ëŠ” ì´ë¦„ì˜ ë©”ì†Œë“œë¥¼ ìë™ìœ¼ë¡œ í˜¸ì¶œí•´ì¤€ë‹¤.
    - ì¢…ë£Œ ë©”ì†Œë“œë¥¼ ì¶”ë¡ í•´ì„œ í˜¸ì¶œí•´ì¤€ë‹¤.
    - ì„¤ì • ì •ë³´ë¥¼ í†µí•´ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤ë©´ ìë™ìœ¼ë¡œ ì¶”ë¡ í•˜ì—¬ ë™ì‘í•œë‹¤.
    - ìœ„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ ë¹ˆ ë¬¸ìì—´ì¸ ""ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤.

## ì• ë…¸í…Œì´ì…˜ @PostConstruct, @PreDestory (ê¶Œì¥)

```java
public class NetworkClient {

    private String url;

    public NetworkClient() {
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);
    }

    public void setUrl(String url) {
        this.url = url;
    }

    // ì„œë¹„ìŠ¤ ì‹œì‘ ì‹œ í˜¸ì¶œ
    public void connect() {
        System.out.println("connect: " + url);
    }

    public void call(String message) {
        System.out.println("call: " + url + " message: " + message);
    }

    // ì„œë¹„ìŠ¤ ì¢…ë£Œ ì‹œ í˜¸ì¶œ
    public void disconnect() {
        System.out.println("close: " + url);
    }

    @PostConstruct
    public void init() throws Exception {
        System.out.println("NetworkClient.init");
        connect();
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
    }

    @PreDestroy
    public void close() throws Exception {
        System.out.println("NetworkClient.close");
        disconnect();
    }
}
```

- **íŠ¹ì§•**
    - ìŠ¤í”„ë§ì—ì„œ ê°€ì¥ ê¶Œì¥í•˜ëŠ” ë°©ë²•
    - `javax.annotation.PostConstruct` íŒ¨í‚¤ì§€ ì´ë‹¤. `javax` íŒ¨í‚¤ì§€ëŠ” JSR-250ì´ë¼ëŠ” ìë°” í‘œì¤€ìœ¼ë¡œì¨ ìŠ¤í”„ë§ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆì—ì„œë„ ë™ì‘í•œë‹¤. (ìŠ¤í”„ë§ì— ì˜ì¡´ì ì´ì§€ ì•ŠìŒ!)
    - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.

## ì •ë¦¬

- **@PostConstruct, @PreDestory ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì!**
- ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¥¼ ì´ˆê¸°í™”, ì†Œë©¸í•´ì•¼ í•˜ë©´ `@Bean`ì˜ `initMethod`, `destoryMethod`ë¥¼ ì‚¬ìš©í•˜ì

# ğŸ“„ Reference

- [[ì¸í”„ëŸ°] ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸ (ê¹€ì˜í•œ)](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard)