## ë¹ˆ ìŠ¤ì½”í”„ë€?

- ìŠ¤í”„ë§ ë¹ˆì´ ìƒì„±ë˜ê³  ì†Œë©¸ë˜ëŠ” ë²”ìœ„, ì¦‰ ë¹ˆì´ ê´€ë¦¬ë˜ëŠ” ë²”ìœ„ë¥¼ ë§í•œë‹¤.
- ìŠ¤í”„ë§ì€ ê¸°ë³¸ì (default)ë¡œ ë¹ˆì„ ì‹±ê¸€í†¤í™” ì‹œì¼œ ê´€ë¦¬í•´ì¤€ë‹¤.

### ë¹ˆ ìŠ¤ì½”í”„ì˜ ì¢…ë¥˜

- **ì‹±ê¸€í†¤:** ê¸°ë³¸ ìŠ¤ì½”í”„, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì‹œì‘ê³¼ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë˜ëŠ” ê°€ì¥ ë„“ì€ ë²”ìœ„ì˜ ìŠ¤ì½”í”„ì´ë‹¤.
- **í”„ë¡œí† íƒ€ì…:** ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì˜ ìƒì„±ê³¼ ì˜ì¡´ê´€ê³„ ì£¼ì…ê¹Œì§€ë§Œ ê´€ì—¬í•˜ê³  ë”ëŠ” ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” **ë§¤ìš° ì§§ì€ ë²”ìœ„**ì˜ ìŠ¤ì½”í”„ì´ë‹¤. (ì´ˆê¸°í™” ë©”ì†Œë“œê¹Œì§€ë§Œ ê´€ì—¬)
- **ì›¹ ê´€ë ¨ ìŠ¤ì½”í”„**
    - **request:** ì›¹ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ë‚˜ê°ˆë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.
    - **session:** ì›¹ ì„¸ì…˜ì´ ìƒì„±ë˜ê³  ì¢…ë£Œë  ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”„ì´ë‹¤.
    - **application:** ì›¹ì˜ ì„œë¸”ë¦¿ ì»¨í…ìŠ¤íŠ¸ì™€ ê°™ì€ ë²”ìœ„ë¡œ ìœ ì§€ë˜ëŠ” ìŠ¤ì½”í”¼ì´ë‹¤.

### ë¹ˆ ìŠ¤ì½”í”„ ë“±ë¡ë²•

**ìë™ ë“±ë¡ (ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”)**

```java
@Scope("prototype")
@Component
public class HelloBean() {}
```

**ìˆ˜ë™ ë“±ë¡**

```java
@Configuration
public class HelloConfig {

		@Scope("prototype")
		@Bean
		PrototypeBean helloBean() {
				return new HelloBean();
		}
}
```

## í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„

- í”„ë¡œí†  íƒ€ì… ìŠ¤ì½”í”„ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì¡°íšŒí•  ê²½ìš° í•­ìƒ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.

### ì‹±ê¸€í†¤ ë¹ˆ ìš”ì²­

1. ì‹±ê¸€í†¤ ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•œë‹¤.
2. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë³¸ì¸ì´ ê´€ë¦¬í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì„ ë°˜í™˜í•œë‹¤.
3. ì´í›„ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°™ì€ **ìš”ì²­ì´ ì™€ë„ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ë°˜í™˜**í•œë‹¤.

### í”„ë¡œí† íƒ€ì… ë¹ˆ ìš”ì²­

1. í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ì˜ ë¹ˆì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìš”ì²­í•œë‹¤.
2. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ ì‹œì ì— í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ê³ , í•„ìš”í•œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•œë‹¤.
3. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ìƒì„±í•œ í”„ë¡œí† íƒ€ì… ë¹ˆì„ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•œë‹¤.
4. ì´í›„ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°™ì€ ìš”ì²­ì´ ì˜¤ë©´ í•­ìƒ ìƒˆë¡œìš´ í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤.

### í”„ë¡œí† íƒ€ì… ìŠ¤ì½”í”„ ì •ë¦¬

- **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” í”„ë¡œí† íƒ€ì… ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ì£¼ì…, ì´ˆê¸°í™”ê¹Œì§€ë§Œ ê´€ì—¬í•œë‹¤.**
- í´ë¼ì´ì–¸íŠ¸ì— ë¹ˆì„ ë°˜í™˜í•˜ê³ , ì´í›„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë°˜í™˜í•œ ë¹ˆì„ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì´í›„ ë¹ˆì„ ê´€ë¦¬í•  ì±…ì„ì€ í´ë¼ì´ì–¸íŠ¸ì— ìˆë‹¤.
- `**@PreDestory` ê°™ì€ ì¢…ë£Œ ë©”ì†Œë“œ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.**

### ì‹±ê¸€í†¤ ë¹ˆ í…ŒìŠ¤íŠ¸

```java
@Test
@DisplayName("ì‹±ê¸€í†¤ ë¹ˆì€ ê°™ì€ ê°ì²´ë¥¼ ë°˜í™˜ë°›ì•„ì•¼ í•œë‹¤.")
void singleTonBeanFindTest() {
    ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(SingleTonBean.class);

    SingleTonBean singleTonBean1 = ac.getBean(SingleTonBean.class);
    SingleTonBean singleTonBean2 = ac.getBean(SingleTonBean.class);
    System.out.println("singleTonBean1 = " + singleTonBean1);
    System.out.println("singleTonBean2 = " + singleTonBean2);

    Assertions.assertThat(singleTonBean1).isSameAs(singleTonBean2);

    ac.close();
}

@Scope("singleton")
static class SingleTonBean {
    @PostConstruct
    public void init() {
        System.out.println("SingleTonBean.init");
    }

    @PreDestroy
    public void destroy() {
        System.out.println("SingleTonBean.destroy");
    }
}
```

**ì¶œë ¥ ì½˜ì†”**

```
SingleTonBean.init
singleTonBean1 = hello.core.scope.SingleTonTest$SingleTonBean@42530531
singleTonBean2 = hello.core.scope.SingleTonTest$SingleTonBean@42530531
16:09:32.209 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@10d307f1, started on Tue Sep 14 16:09:31 KST 2021
SingleTonBean.destroy
```

- ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì†Œë“œ ì‹¤í–‰
- `singleTonBean1`ê³¼ `singleTonBean2`ëŠ” ê°™ì€ ì°¸ì¡°ê°’ìœ¼ë¡œ ê°™ì€ ê°ì²´ì´ë‹¤.

### í”„ë¡œí†  íƒ€ì… ë¹ˆ í…ŒìŠ¤íŠ¸

```java
@Test
@DisplayName("í”„ë¡œí†  íƒ€ì… ë¹ˆì€ ë¹ˆ ìš”ì²­ì‹œ ë§ˆë‹¤ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.")
void prototypeBeanFind() {
    ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);

    System.out.println("find prototypeBean1");
    PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);

    System.out.println("find prototypeBean2");
    PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);

    System.out.println("prototypeBean1 = " + prototypeBean1);
    System.out.println("prototypeBean2 = " + prototypeBean2);

    Assertions.assertThat(prototypeBean1).isNotSameAs(prototypeBean2);

    ac.close();
}

@Scope("prototype")
static class PrototypeBean {
    @PostConstruct
    public void init() {
        System.out.println("PrototypeBean.init");
    }

    @PreDestroy
    public void destroy() {
        System.out.println("PrototypeBean.destroy");
    }
}
```

**ì¶œë ¥ ì½˜ì†”**

```
find prototypeBean1
PrototypeBean.init
find prototypeBean2
PrototypeBean.init
prototypeBean1 = hello.core.scope.ProtoTypeTest$PrototypeBean@17d88132
prototypeBean2 = hello.core.scope.ProtoTypeTest$PrototypeBean@5ddcc487
16:15:28.932 [main] DEBUG org.springframework.context.annotation.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@7e5afaa6, started on Tue Sep 14 16:15:28 KST 2021
```

- ê°ì²´ ì´ˆê¸°í™” ë©”ì†Œë“œë§Œ í˜¸ì¶œëœë‹¤.
- ë°˜í™˜ë°›ì€ ê°ì²´ì˜ ì°¸ì¡°ê°’ì´ ë‹¤ë¥´ë©° ë‹¤ë¥¸ ê°ì²´ì´ë‹¤.
- **ê°ì²´ ì†Œë©¸ ë©”ì†Œë“œëŠ” í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤!**

# ğŸ“„ Reference

- [[ì¸í”„ëŸ°] ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸ (ê¹€ì˜í•œ)](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard)