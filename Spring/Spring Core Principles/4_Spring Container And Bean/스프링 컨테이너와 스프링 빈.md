## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

```java
// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
AppliccationContext applicationContext = 
		new AnnotationConfigApplicationContext(AppConfig.class);
```

- **ApplicationContext**
    - ì¸í„°í˜ì´ìŠ¤
    - BeanFactoryë¥¼ ìƒì†ë°›ì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì´ë‹¤.
- **AnnotationConfigApplicationContext**
    - ìë°” ì„¤ì • í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“œëŠ” êµ¬í˜„ì²´ í´ë˜ìŠ¤

## ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ìƒì„± ê³¼ì •

1. **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±**
    - `AppConfig.class` íŒŒì¼ì„ êµ¬ì„± ì •ë³´ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±
2. **ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡**
    - êµ¬ì„±ì •ë³´ íŒŒì¼ì˜ `@Bean` ì• ë…¸í…Œì´ì…˜ì„ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡
    - ë¹ˆ ì´ë¦„ì€ ë©”ì†Œë“œ ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤. (ê¸°ë³¸ê°’)
    - ë¹ˆ ì´ë¦„ì„ ì§ì ‘ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤.
        - `@Bean(name="myMemberService")`

    > **ì£¼ì˜: ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬**í•´ì•¼í•œë‹¤. ê°™ì€ ì´ë¦„ì„ ë¶€ì—¬í•œë‹¤ë©´ ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜, ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¬ê±°ë‚˜ ì„¤ì •ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

3. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì¤€ë¹„
    - êµ¬ì„±ì •ë³´ íŒŒì¼ì˜ ì •ë³´ë¥¼ í† ëŒ€ë¡œ ë¹ˆë“¤ì„ ëª¨ë‘ ìƒì„±ì´ ì™„ë£Œëœ ìƒíƒœ
4. ìŠ¤í”„ë§ ë¹ˆ ì˜ì¡´ê´€ê³„ ì„¤ì • - ì™„ë£Œ
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ í•˜ì—¬ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•œë‹¤.

**ì°¸ê³ **

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë‹¨ê³„ê°€ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤.
- **ìŠ¤í”„ë§ ë¹ˆ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì…**ì˜ ìˆœì„œë¡œ ë‹¨ê³„ê°€ ì‹¤í–‰ëœë‹¤.

## ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

```java
AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

@Test
@DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
void findAllBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();

    for (String beanDefinitionName : beanDefinitionNames) {
        Object bean = ac.getBean(beanDefinitionName);
        System.out.println("name = " + beanDefinitionName + " object = " + bean);
    }
}

@Test
@DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
void findApplicationBean() {
    String[] beanDefinitionNames = ac.getBeanDefinitionNames();

    for (String beanDefinitionName : beanDefinitionNames) {
        BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

        // BeanDefinition.ROLE_APPLICATION: ì‚¬ìš©ìê°€ ì§ì ‘ ë“±ë¡í•œ ë¹ˆ, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬
        // BeanDefinition.ROLE_INFRASTRUCTURE: ìŠ¤í”„ë§ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
        if (beanDefinition.getRole() == BeanDefinition.ROLE_INFRASTRUCTURE) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }
    }
}
```

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸

```java
class ApplicationContextBasicFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName() {
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ì´ë¦„ ì—†ì´ íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ")
    void findBeanByType() {
        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByImplementationName() {
        // êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ê²½ìš° ìœ ì—°ì„±ì´ ë–¨ì–´ì§€ëŠ” ë‹¨ì ì´ ì¡´ì¬í•œë‹¤. (êµ¬í˜„ì— ì˜ì¡´í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì—­í• ì— ì˜ì¡´í•˜ì!)
        MemberService memberService = ac.getBean("memberService", MemberServiceImpl.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ ì‹¤íŒ¨")
    void findBeanByNameFail() {
        assertThrows(NoSuchBeanDefinitionException.class,
                () -> ac.getBean("no bean name", MemberService.class));
    }
}
```

- ì¡°íšŒ ëŒ€ìƒ ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ
    - **NoSuchBeanDefinitionException**

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒ

```java
public class ApplicationContextSameBeanFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SameBeanConfig.class);

    @Configuration
    static class SameBeanConfig {

        @Bean
        public MemberRepository memberRepository1() {
            return new MemoryMemberRepository();
        }

        @Bean
        public MemberRepository memberRepository2() {
            return new MemoryMemberRepository();
        }
    }

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.")
    void findBeanByTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(MemberRepository.class));
    }

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤.")
    void findBeanByName() {
        MemberRepository memberRepository1 = ac.getBean("memberRepository1", MemberRepository.class);
        assertThat(memberRepository1).isInstanceOf(MemberRepository.class);
    }

    @Test
    @DisplayName("íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByType () {
        Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
        System.out.println("beansOfType = " + beansOfType);
        assertThat(beansOfType.size()).isEqualTo(2);
    }

}
```

- íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì˜ ë¹ˆì´ ë‘˜ ì´ìƒì´ë©´ ì˜¤ë¥˜ ë°œìƒ â†’ ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ì—¬ í•´ê²° ê°€ëŠ¥
- `getBeansOfType()` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ íƒ€ì…ì˜ ëª¨ë“  ë¹ˆì„ ì¡°íšŒ ê°€ëŠ¥

## ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ìƒì† ê´€ê³„

```java
public class ApplicationContextExtendsFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);

    @Configuration
    static class TestConfig {

        @Bean
        public DiscountPolicy rateDiscountPolicy() {
            return new RateDiscountPolicy();
        }

        @Bean
        public DiscountPolicy fixDiscountPolicy() {
            return new FixDiscountPolicy();
        }
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´ ì¤‘ë³µ ì˜¤ë¥˜ ë°œìƒ")
    void findBeanByParentTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(DiscountPolicy.class));
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´ ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤.")
    void findBeanByParentTypeBeanName() {
        DiscountPolicy rateDiscountPolicy = ac.getBean("rateDiscountPolicy", DiscountPolicy.class);
        assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´ íŠ¹ì • í•˜ìœ„ íƒ€ì…ì„ ì¡°íšŒí•˜ë©´ ëœë‹¤.")
    void findBeanByParentTypeSubType() {
        DiscountPolicy rateDiscountPolicy = ac.getBean(RateDiscountPolicy.class);
        assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByParentType() {
        Map<String, DiscountPolicy> beansOfType = ac.getBeansOfType(DiscountPolicy.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
        assertThat(beansOfType.size()).isEqualTo(2);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸° - Object")
    void findAllBeanByObjectType() {
        Map<String, Object> beansOfType = ac.getBeansOfType(Object.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
    }
}
```

- ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ìì‹ íƒ€ì…ë„ í•¨ê»˜ ì¡°íšŒëœë‹¤.
- ìë°” ê°ì²´ì˜ ìµœê³  ë¶€ëª¨ì¸ `Object` íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ ì‹œ, ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•œë‹¤.

# ğŸ“„ Reference

- [[ì¸í”„ëŸ°] ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸ (ê¹€ì˜í•œ)](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8/dashboard)
